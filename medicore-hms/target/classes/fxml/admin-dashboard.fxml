<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.text.Text?>
<?import javafx.scene.chart.*?>

<BorderPane xmlns="http://javafx.com/javafx/21" 
            xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="com.medicore.controller.AdminDashboardController">
    
    <!-- Top Navigation Bar -->
    <top>
        <HBox styleClass="nav-bar" spacing="20" alignment="CENTER_LEFT">
            <padding>
                <Insets top="15" right="20" bottom="15" left="20"/>
            </padding>
            
            <!-- Logo and Title -->
            <HBox spacing="15" alignment="CENTER_LEFT">
                <HBox alignment="CENTER" prefHeight="40" prefWidth="40" 
                      style="-fx-background-color: #2563eb; -fx-background-radius: 20;">
                    <Text text="M+" fill="white" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
                </HBox>
                <VBox>
                    <Text text="mediCore" style="-fx-font-size: 20px; -fx-font-weight: bold;"/>
                    <Text text="Admin Dashboard" style="-fx-font-size: 12px; -fx-fill: #64748b;"/>
                </VBox>
            </HBox>
            
            <!-- Spacer -->
            <Region HBox.hgrow="ALWAYS"/>
            
            <!-- User Info and Actions -->
            <HBox spacing="15" alignment="CENTER_RIGHT">
                <!-- Notifications -->
                <Button fx:id="notificationButton" text="ðŸ””" styleClass="btn, btn-secondary" 
                        onAction="#handleNotifications"/>
                
                <!-- User Menu -->
                <MenuButton fx:id="userMenuButton" text="Admin User" styleClass="btn, btn-secondary">
                    <items>
                        <MenuItem text="Profile" onAction="#handleProfile"/>
                        <MenuItem text="Settings" onAction="#handleSettings"/>
                        <SeparatorMenuItem/>
                        <MenuItem text="Logout" onAction="#handleLogout"/>
                    </items>
                </MenuButton>
            </HBox>
        </HBox>
    </top>
    
    <!-- Main Content Area -->
    <center>
        <HBox>
            <!-- Sidebar Navigation -->
            <VBox styleClass="sidebar" prefWidth="250">
                <padding>
                    <Insets top="20" right="0" bottom="20" left="0"/>
                </padding>
                
                <!-- Navigation Items -->
                <VBox spacing="5">
                    <Button text="ðŸ“Š Dashboard" styleClass="nav-item, active" 
                            onAction="#handleDashboard" maxWidth="Infinity"/>
                    <Button text="ðŸ‘¥ User Management" styleClass="nav-item" 
                            onAction="#handleUserManagement" maxWidth="Infinity"/>
                    <Button text="ðŸ¥ Staff Management" styleClass="nav-item" 
                            onAction="#handleStaffManagement" maxWidth="Infinity"/>
                    <Button text="ðŸ“… Shift Management" styleClass="nav-item" 
                            onAction="#handleShiftManagement" maxWidth="Infinity"/>
                    <Button text="ðŸ“ˆ Reports & Analytics" styleClass="nav-item" 
                            onAction="#handleReports" maxWidth="Infinity"/>
                    <Button text="ðŸ’Š Inventory Overview" styleClass="nav-item" 
                            onAction="#handleInventory" maxWidth="Infinity"/>
                    <Button text="ðŸ›ï¸ Bed Management" styleClass="nav-item" 
                            onAction="#handleBedManagement" maxWidth="Infinity"/>
                    <Button text="ðŸš¨ Emergency Alerts" styleClass="nav-item" 
                            onAction="#handleEmergencyAlerts" maxWidth="Infinity"/>
                    <Button text="âš™ï¸ System Settings" styleClass="nav-item" 
                            onAction="#handleSystemSettings" maxWidth="Infinity"/>
                    <Button text="ðŸ“‹ Audit Logs" styleClass="nav-item" 
                            onAction="#handleAuditLogs" maxWidth="Infinity"/>
                </VBox>
            </VBox>
            
            <!-- Main Dashboard Content -->
            <VBox spacing="20" HBox.hgrow="ALWAYS">
                <padding>
                    <Insets top="20" right="20" bottom="20" left="20"/>
                </padding>
                
                <!-- Welcome Section -->
                <VBox spacing="10">
                    <Text text="Welcome back, Admin!" styleClass="label-title"/>
                    <Text text="Here's what's happening at your hospital today." 
                          styleClass="label-subtitle"/>
                </VBox>
                
                <!-- Statistics Cards -->
                <HBox spacing="20">
                    <!-- Total Patients -->
                    <VBox styleClass="stat-card" spacing="10" HBox.hgrow="ALWAYS">
                        <Text text="Total Patients" styleClass="stat-label"/>
                        <Text fx:id="totalPatientsLabel" text="1,234" styleClass="stat-number"/>
                        <Text text="+12% from last month" styleClass="stat-change, positive"/>
                    </VBox>
                    
                    <!-- Active Staff -->
                    <VBox styleClass="stat-card" spacing="10" HBox.hgrow="ALWAYS">
                        <Text text="Active Staff" styleClass="stat-label"/>
                        <Text fx:id="activeStaffLabel" text="156" styleClass="stat-number"/>
                        <Text text="+3 new this week" styleClass="stat-change, positive"/>
                    </VBox>
                    
                    <!-- Available Beds -->
                    <VBox styleClass="stat-card" spacing="10" HBox.hgrow="ALWAYS">
                        <Text text="Available Beds" styleClass="stat-label"/>
                        <Text fx:id="availableBedsLabel" text="23" styleClass="stat-number"/>
                        <Text text="78% occupancy" styleClass="stat-change"/>
                    </VBox>
                    
                    <!-- Revenue Today -->
                    <VBox styleClass="stat-card" spacing="10" HBox.hgrow="ALWAYS">
                        <Text text="Revenue Today" styleClass="stat-label"/>
                        <Text fx:id="revenueTodayLabel" text="$45,678" styleClass="stat-number"/>
                        <Text text="+8% from yesterday" styleClass="stat-change, positive"/>
                    </VBox>
                </HBox>
                
                <!-- Charts and Analytics -->
                <HBox spacing="20">
                    <!-- Patient Admissions Chart -->
                    <VBox styleClass="card" spacing="15" HBox.hgrow="ALWAYS">
                        <VBox styleClass="card-header">
                            <Text text="Patient Admissions (Last 7 Days)" styleClass="label-subtitle"/>
                        </VBox>
                        <LineChart fx:id="admissionsChart" prefHeight="200">
                            <xAxis>
                                <CategoryAxis side="BOTTOM"/>
                            </xAxis>
                            <yAxis>
                                <NumberAxis side="LEFT"/>
                            </yAxis>
                        </LineChart>
                    </VBox>
                    
                    <!-- Department Distribution -->
                    <VBox styleClass="card" spacing="15" HBox.hgrow="ALWAYS">
                        <VBox styleClass="card-header">
                            <Text text="Department Distribution" styleClass="label-subtitle"/>
                        </VBox>
                        <PieChart fx:id="departmentChart" prefHeight="200"/>
                    </VBox>
                </HBox>
                
                <!-- Recent Activities and Alerts -->
                <HBox spacing="20">
                    <!-- Recent Activities -->
                    <VBox styleClass="card" spacing="15" HBox.hgrow="ALWAYS">
                        <VBox styleClass="card-header">
                            <Text text="Recent Activities" styleClass="label-subtitle"/>
                        </VBox>
                        <ListView fx:id="recentActivitiesList" prefHeight="200"/>
                    </VBox>
                    
                    <!-- System Alerts -->
                    <VBox styleClass="card" spacing="15" HBox.hgrow="ALWAYS">
                        <VBox styleClass="card-header">
                            <Text text="System Alerts" styleClass="label-subtitle"/>
                        </VBox>
                        <VBox fx:id="alertsContainer" spacing="10">
                            <!-- Alerts will be populated dynamically -->
                            <HBox styleClass="alert, alert-warning" spacing="10">
                                <Text text="âš ï¸"/>
                                <VBox>
                                    <Text text="Low Medicine Stock" style="-fx-font-weight: bold;"/>
                                    <Text text="Paracetamol stock is running low (5 units remaining)"/>
                                </VBox>
                            </HBox>
                            
                            <HBox styleClass="alert, alert-info" spacing="10">
                                <Text text="â„¹ï¸"/>
                                <VBox>
                                    <Text text="System Maintenance" style="-fx-font-weight: bold;"/>
                                    <Text text="Scheduled maintenance tonight at 2:00 AM"/>
                                </VBox>
                            </HBox>
                        </VBox>
                    </VBox>
                </HBox>
                
                <!-- Quick Actions -->
                <VBox styleClass="card" spacing="15">
                    <VBox styleClass="card-header">
                        <Text text="Quick Actions" styleClass="label-subtitle"/>
                    </VBox>
                    <HBox spacing="15">
                        <Button text="Add New User" styleClass="btn, btn-primary" 
                                onAction="#handleAddUser"/>
                        <Button text="Generate Report" styleClass="btn, btn-secondary" 
                                onAction="#handleGenerateReport"/>
                        <Button text="Send Broadcast" styleClass="btn, btn-secondary" 
                                onAction="#handleSendBroadcast"/>
                        <Button text="Emergency Alert" styleClass="btn, btn-error" 
                                onAction="#handleEmergencyAlert"/>
                    </HBox>
                </VBox>
            </VBox>
        </HBox>
    </center>
    
    <!-- Status Bar -->
    <bottom>
        <HBox styleClass="status-bar" spacing="20" alignment="CENTER_LEFT">
            <Label text="System Status: Online"/>
            <Separator orientation="VERTICAL" prefHeight="20"/>
            <Label fx:id="connectedUsersLabel" text="Connected Users: 45"/>
            <Separator orientation="VERTICAL" prefHeight="20"/>
            <Label fx:id="serverStatusLabel" text="Server: Running"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Label fx:id="currentTimeLabel" text=""/>
        </HBox>
    </bottom>
    
</BorderPane>
